<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inscripción 7° Año EBI - Liceo Dr. Aníbal Acosta Estapé</title>
  <style>
    :root {
      --rojo: #c41e3a;
      --rojo-oscuro: #a0172e;
      --gris-claro: #f8f9fa;
      --texto: #333;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
      padding: 20px;
      margin: 0;
      color: var(--texto);
    }
    .container {
      max-width: 540px;
      margin: 30px auto;
      background: white;
      padding: 35px;
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      border-top: 6px solid var(--rojo);
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    h1 {
      color: var(--rojo);
      font-size: 1.75rem;
      margin: 0 0 10px 0;
    }
    .subtitulo {
      color: #555;
      font-size: 1.05rem;
      margin: 0;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
      color: #444;
      font-size: 1rem;
    }
    input, select {
      width: 100%;
      padding: 12px 14px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      transition: border 0.3s;
    }
    input:focus, select:focus {
      outline: none;
      border-color: var(--rojo);
      box-shadow: 0 0 0 3px rgba(196, 30, 58, 0.15);
    }
    button {
      margin-top: 35px;
      width: 100%;
      padding: 16px;
      font-size: 1.1rem;
      font-weight: bold;
      background: var(--rojo);
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      background: var(--rojo-oscuro);
      transform: translateY(-2px);
    }
    .mensaje {
      margin-top: 25px;
      padding: 18px;
      border-radius: 10px;
      text-align: center;
      font-size: 1rem;
      display: none;
      background: #f0f8ff;
      border: 1px solid #b3d9ff;
      color: #1e40af;
    }
    .leyenda {
      font-size: 0.92rem;
      color: #666;
      text-align: center;
      margin-top: 20px;
      line-height: 1.5;
    }

    @media (max-width: 600px) {
      .container { padding: 25px; margin: 15px auto; }
      h1 { font-size: 1.55rem; }
      button { padding: 14px; font-size: 1.05rem; }
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>Inscripción 7° Año EBI</h1>
    <p class="subtitulo">Liceo Dr. Aníbal Acosta Estapé</p>
  </div>

  <p class="leyenda">
    <strong>Fechas disponibles para atención:</strong> 11, 12 y 13 de febrero de 2026<br>
    Cada horario admite hasta <strong>4 cupos</strong>, en caso de no haber disponibilidad, seleccione otro horario.
  </p>

  <label>Nombre y Apellido completo</label>
  <input type="text" id="nombre" placeholder="Ejemplo: Juan Carlos Gómez" required>

  <label>Cédula de Identidad(sin comas ni guiones)</label>
  <input type="text" id="cedula" placeholder="Ejemplo: 51234567" required>

  <label>Número de contacto</label>
  <input type="tel" id="celular" placeholder="Ejemplo: 091234567" required>

  <label>Fecha de atención</label>
  <input type="date" id="fecha" required min="2026-02-11" max="2026-02-13">

  <label>Horario de atención</label>
  <select id="hora" required>
    <option value="" disabled selected>Seleccione un horario</option>
    <option>08:00</option><option>08:15</option><option>08:30</option><option>08:45</option>
    <option>09:00</option><option>09:15</option><option>09:30</option><option>09:45</option>
    <option>10:00</option><option>10:15</option><option>10:30</option><option>10:45</option>
    <option>11:00</option><option>11:15</option><option>11:30</option><option>11:45</option>
    <option>12:00</option>
  </select>

  <button id="btn-confirmar">Confirmar</button>

  <div class="mensaje" id="resultado"></div>
</div>

<script>
  // Evitar que la misma persona se inscriba dos veces (en el mismo navegador)
  if (localStorage.getItem('datosInscripcion7EBI')) {
    window.location.href = 'comprobante.html';
  }

  document.getElementById('btn-confirmar').addEventListener('click', function(e) {
    e.preventDefault();

    const nombre  = document.getElementById('nombre').value.trim();
    const cedula  = document.getElementById('cedula').value.trim();
    const celular = document.getElementById('celular').value.trim();
    const fecha   = document.getElementById('fecha').value;
    const hora    = document.getElementById('hora').value;

    if (!nombre || !cedula || !celular || !fecha || !hora) {
      alert('Por favor, complete todos los campos requeridos.');
      return;
    }

    const claveTurno = fecha + ' ' + hora;
    let turnos = JSON.parse(localStorage.getItem('turnosOcupados7EBI')) || {};
    if (!turnos[claveTurno]) turnos[claveTurno] = 0;

    if (turnos[claveTurno] >= 4) {
      document.getElementById('resultado').style.display = 'block';
      document.getElementById('resultado').innerHTML = `
        <strong>Horario no disponible</strong><br><br>
        El horario del <strong>${formatearFecha(fecha)}</strong> a las <strong>${hora} hs</strong> 
        ya alcanzó el cupo máximo de 4 turnos.<br><br>
        Por favor seleccione otro horario.
      `;
      return;
    }

    // Reservar el turno
    turnos[claveTurno]++;
    localStorage.setItem('turnosOcupados7EBI', JSON.stringify(turnos));

    // Guardar datos para el comprobante
    const datos = { nombre, cedula, celular, fecha, hora };
    localStorage.setItem('datosInscripcion7EBI', JSON.stringify(datos));

    // Mensaje de éxito
    const lugaresRestantes = 4 - turnos[claveTurno];
    const mensajeLugares = lugaresRestantes === 0 
      ? 'Ha sido el último turno disponible en este horario.' 
      : `Quedan ${lugaresRestantes} turno(s) disponible(s).`;

    document.getElementById('resultado').style.display = 'block';
    document.getElementById('resultado').innerHTML = `
      <strong>¡Turno reservado con éxito!</strong><br><br>
      Estimado/a <strong>${nombre}</strong>,<br><br>
      Su turno quedó confirmado para el <strong>${formatearFecha(fecha)}</strong> 
      a las <strong>${hora} hs</strong>.<br><br>
      ${mensajeLugares}<br><br>
      En breve será redirigido al comprobante...
    `;

    // Redirigir al comprobante después de 3 segundos
    setTimeout(() => {
      window.location.href = 'comprobante.html';
    }, 3000);
  });

  function formatearFecha(iso) {
    const opciones = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
    return new Date(iso).toLocaleDateString('es-UY', opciones);
  }
</script>

</body>
</html>
